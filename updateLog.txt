更新日志

2022-01-22
新增路由错误码： 一般是客户端请求了不存在的路由引起的
网关增加 路由错误码 逻辑，如果客户端请求了不存在的路由，直接响应错误
新增 websocket  编解码
增加 websocket 数据压缩扩展
对外服传输协议改为纯 PB

2022-01-21
网关新增路由检测:
    对外服请求逻辑服时
    如果没有找到对应的逻辑服来处理请求，不在往逻辑服发送
    并立即返回错误码给对外服

2022-01-20
对外服的 socket 和 websocket 共用一个业务处理类 ExternalBizHandler (负责把游戏端的请求 转发给网关)
对外服的 socket 和 websocket 接收来自网关的响应也逻辑也保持一至

2022-01-19
登录业务 新增 ChangeUserIdKit 工具：
    变更对外服的 userId, userId与channel 关联
    用在用户登录时，从程序员的业务数据库中获得 userId

新增用户登录, 登录流程：
    真实客户端发送请求 --> 对外服 --> 网关服 --> 逻辑服（
        逻辑服通知对外服变更：逻辑服 --> 网关服 --> 对外服 --> 网关服 --> 逻辑服
    ） --> 网关服 --> 对外服

业务框架:
BarMessage 增加 rpcCommandType 字段:
    特性如下：
        在 bolt 中， 掉用方使用
        （com.alipay.remoting.rpc.RpcServer.oneway
        或 com.alipay.remoting.rpc.RpcClient.oneway）的 oneway 方法

        则 AsyncContext.sendResponse 无法回传响应
        原因可阅读 com.alipay.remoting.rpc.protocol.RpcRequestProcessor.sendResponseIfNecessary 源码。

        业务框架保持与 bolt 的风格一至使用 RpcCommandType
        不同的是业务框架会用 RpcCommandType 区别使用什么方式来发送响应。

        如果 rpcCommandType != RpcCommandType.REQUEST_ONEWAY ,
        就使用 com.alipay.remoting.AsyncContext.sendResponse 来发送响应
        具体发送逻辑可读 com.iohao.little.game.action.skeleton.core.flow.interal.DefaultActionAfter 源码

2022-01-18
优化业务框架: 新增 action void 特性， 定义为 void 的业务方法，不在给掉用端响应（除非有业务异常码）
优化业务框架: DebugInOut 日志可以支持 JSR 303、JSR 349、JSR 380 验证规范 的日志
优化业务框架: Flow 流程，在开启业务参数验证规范功能时，业务参数如果验证不通过,则直接响应带有错误码的消息给掉用端

2022-01-17
业务框架支持 JSR 303、JSR 349、JSR 380 验证规范
业务框架新增 flow 上下文 (FlowContext), 生命周期存在于当前执行流程

2022-01-16
对外服 新增接收并处理 来自网关的广播消息
广播小部件 新增广播上下文

2022-01-15
整合 protobuf、mapstruct、lombok 的使用
新增坦克游戏相关 pb
规范子游戏的 cmd 编写方式

2022-01-14
业务框架加强规范异常处理
提供异常全局统一处理规范
领域事件新增默认异常处理

2022-01-12
业务框架支持 proto

实践：
抽象逻辑服相关
1 房间
2 玩家
3 游戏操作规范接口
4 游戏开始流接口
